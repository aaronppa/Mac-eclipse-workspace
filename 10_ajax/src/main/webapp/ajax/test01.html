<!DOCTYPE html>
<!--  
	Ajax를 구성하는 기술들..
	
	 - CSS, JavaScript, DOM, XMLHttpRequest
 -->
<html>
<head>
<meta charset="UTF-8">
<script src="https://code.jquery.com/jquery-3.3.1.js"
	integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60="
	crossorigin="anonymous"></script>
<title>AJAX</title>

</head>
<body>
	<h2>Ajax Communication Practice</h2>
	<button>Invoke</button>
	<hr>
	<div id="result"></div>

	<script>
		$("button").click(function(e){
			console.log("Starting Ajax invoke...")
			/*
				Ajax 비동기 호출 
				 - 클라이언트는 서버에 요청하고 응답이 올때까지 기다리는 것이 아닌
				   비동기적으로 클라이언트에서 작업을 별로 수행가능하다. 
				 - 화면의 새로고침 없이 특정한 부분을 찾아서 변경할 수 있다.   
			*/
			
			// 1 단계: XMLHttpReqeust 객체 얻기
			var xhr = new XMLHttpRequest()
			
			// 2 단계: 서버에 요청할 페이지를 정보 설정하기 
			// Http protocol 사용 방식은 동일함
			// 비동기호출(true/false)
			xhr.open("GET","hello.jsp", true)
			
			// 3 단계: 서버 데이터 주고 받기
			xhr.send()
			
			// 4 단계: 결과 받아서 처리
			// xhr.responseText: <h1>AJA Invoked.</h2>
			// 비동기 처리이기 때문에 hello.jsp를 서버에서 실행하고 결과를 설정하기전에 코드가 실행되어서 결과 값이 존재하지 않는다. 
			console.log("Result: "+xhr.responseText)
			setTimeout(function(){
				$("#result").html(xhr.responseText)
				},10)
			
		})
		
	</script>
</body>
</html>